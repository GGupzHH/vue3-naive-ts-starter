import{g as Ke,l as g,c as nt,a as tt,aH as En,ao as lt,aI as at,f as Bn,t as _e,aJ as ot,aK as it,q as rt,av as dt,r as A,aL as mn,j as E,aM as st,as as Z,U as ct,aN as ut,aO as Qe,aP as In,aQ as ft,d as I,o as ue,e as V,aR as Dn,n as Ne,ay as Ie,aS as ht,h as _n,aT as gt,u as dn,aU as Un,aV as Xe,x as P,w as Pe,T as on,aW as rn,aB as Ye,aX as Fn,aY as vt,z as j,p as $n,aZ as kn,k as Mn,a_ as wn,aw as pn,ax as yt,a$ as Pn,b0 as bt,ar as mt,az as kt,b1 as xt,b2 as Sn,aC as wt,b3 as pt,b4 as St,b5 as Rt,b6 as Ct,a0 as Nt,b7 as Kt,b8 as Tt,b9 as Dt,ba as Ft,bb as Pt,bc as Ot}from"./index-33ab4936.js";function jn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Lt=Ke({name:"Switcher",render(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},g("path",{d:"M12 8l10 8l-10 8z"}))}}),At=e=>{const{popoverColor:l,boxShadow2:r,borderRadius:c,heightMedium:i,dividerColor:s,textColor2:k}=e;return{menuPadding:"4px",menuColor:l,menuBoxShadow:r,menuBorderRadius:c,menuHeight:`calc(${i} * 7.6)`,actionDividerColor:s,actionTextColor:k,actionPadding:"8px 12px"}},Et=nt({name:"TreeSelect",common:tt,peers:{Tree:En,Empty:lt,InternalSelection:at},self:At}),Bt=Et,Rn=Bn("n-tree-select"),Je=Bn("n-tree"),It=Ke({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:l}=_e(Je,null);return()=>{const{clsPrefix:r,expanded:c,hide:i,indent:s,onClick:k}=e;return g("span",{"data-switcher":!0,class:[`${r}-tree-node-switcher`,c&&`${r}-tree-node-switcher--expanded`,i&&`${r}-tree-node-switcher--hide`],style:{width:`${s}px`},onClick:k},g("div",{class:`${r}-tree-node-switcher__icon`},g(ot,null,{default:()=>{if(e.loading)return g(it,{clsPrefix:r,key:"loading",radius:85,strokeWidth:20});const{value:y}=l;return y?y({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):g(rt,{clsPrefix:r,key:"switcher"},{default:()=>g(Lt,null)})}})))}}}),_t=Ke({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const l=_e(Je);function r(i){const{onCheck:s}=e;s&&s(i)}function c(i){r(i)}return{handleUpdateValue:c,mergedTheme:l.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:l,checked:r,indeterminate:c,disabled:i,focusable:s,indent:k,handleUpdateValue:y}=this;return g("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${k}px`},"data-checkbox":!0},g(dt,{focusable:s,disabled:i,theme:l.peers.Checkbox,themeOverrides:l.peerOverrides.Checkbox,checked:r,indeterminate:c,onUpdateChecked:y}))}}),Ut=Ke({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:l,renderPrefixRef:r,renderSuffixRef:c,labelFieldRef:i}=_e(Je),s=A(null);function k(w){const{onClick:S}=e;S&&S(w)}function y(w){k(w)}return{selfRef:s,renderLabel:l,renderPrefix:r,renderSuffix:c,labelField:i,handleClick:y}},render(){const{clsPrefix:e,labelField:l,nodeProps:r,checked:c=!1,selected:i=!1,renderLabel:s,renderPrefix:k,renderSuffix:y,handleClick:w,onDragstart:S,tmNode:{rawNode:x,rawNode:{prefix:U,suffix:R,[l]:_}}}=this;return g("span",Object.assign({},r,{ref:"selfRef",class:[`${e}-tree-node-content`,r==null?void 0:r.class],onClick:w,draggable:S===void 0?void 0:!0,onDragstart:S}),k||U?g("div",{class:`${e}-tree-node-content__prefix`},k?k({option:x,selected:i,checked:c}):mn(U)):null,g("div",{class:`${e}-tree-node-content__text`},s?s({option:x,selected:i,checked:c}):mn(_)),y||R?g("div",{class:`${e}-tree-node-content__suffix`},y?y({option:x,selected:i,checked:c}):mn(R)):null)}});function On({position:e,offsetLevel:l,indent:r,el:c}){const i={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")i.left=0,i.top=0,i.bottom=0,i.borderRadius="inherit",i.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const s=e==="before"?"top":"bottom";i[s]=0,i.left=`${c.offsetLeft+6-l*r}px`,i.height="2px",i.backgroundColor="var(--n-drop-mark-color)",i.transformOrigin=s,i.borderRadius="1px",i.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return g("div",{style:i})}function $t({dropPosition:e,node:l}){return l.isLeaf===!1||l.children?!0:e!=="inside"}function zn(e){return E(()=>e.leafOnly?"child":e.checkStrategy)}function Ce(e,l){return!!e.rawNode[l]}function Vn(e,l,r,c){e==null||e.forEach(i=>{r(i),Vn(i[l],l,r,c),c(i)})}function Mt(e,l,r,c,i){const s=new Set,k=new Set,y=[];return Vn(e,c,w=>{if(y.push(w),i(l,w)){k.add(w[r]);for(let S=y.length-2;S>=0;--S)if(!s.has(y[S][r]))s.add(y[S][r]);else return}},()=>{y.pop()}),{expandedKeys:Array.from(s),highlightKeySet:k}}if(st&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function jt(e,l,r,c,i){const s=new Set,k=new Set,y=new Set,w=[],S=[],x=[];function U(_){_.forEach(D=>{if(x.push(D),l(r,D)){s.add(D[c]),y.add(D[c]);for(let b=x.length-2;b>=0;--b){const v=x[b][c];if(!k.has(v))k.add(v),s.has(v)&&s.delete(v);else break}}const K=D[i];K&&U(K),x.pop()})}U(e);function R(_,D){_.forEach(K=>{const b=K[c],v=s.has(b),C=k.has(b);if(!v&&!C)return;const O=K[i];if(O)if(v)D.push(K);else{w.push(b);const H=Object.assign(Object.assign({},K),{[i]:[]});D.push(H),R(O,H[i])}else D.push(K)})}return R(e,S),{filteredTree:S,highlightKeySet:y,expandedKeys:w}}const zt=Ke({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const l=_e(Je),{droppingNodeParentRef:r,droppingMouseNodeRef:c,draggingNodeRef:i,droppingPositionRef:s,droppingOffsetLevelRef:k,nodePropsRef:y,indentRef:w,blockLineRef:S,checkboxPlacementRef:x,checkOnClickRef:U,disabledFieldRef:R,showLineRef:_,renderSwitcherIconRef:D,overrideDefaultNodeClickBehaviorRef:K}=l,b=Z(()=>!!e.tmNode.rawNode.checkboxDisabled),v=Z(()=>Ce(e.tmNode,R.value)),C=Z(()=>l.disabledRef.value||v.value),O=E(()=>{const{value:u}=y;if(u)return u({option:e.tmNode.rawNode})}),H=A(null),q={value:null};ct(()=>{q.value=H.value.$el});function X(){const u=()=>{const{tmNode:N}=e;if(!N.isLeaf&&!N.shallowLoaded){if(!l.loadingKeysRef.value.has(N.key))l.loadingKeysRef.value.add(N.key);else return;const{onLoadRef:{value:T}}=l;T&&T(N.rawNode).then(M=>{M!==!1&&l.handleSwitcherClick(N)}).finally(()=>{l.loadingKeysRef.value.delete(N.key)})}else l.handleSwitcherClick(N)};D.value?setTimeout(u,0):u()}const xe=Z(()=>!v.value&&l.selectableRef.value&&(l.internalTreeSelect?l.mergedCheckStrategyRef.value!=="child"||l.multipleRef.value&&l.cascadeRef.value||e.tmNode.isLeaf:!0)),Q=Z(()=>l.checkableRef.value&&(l.cascadeRef.value||l.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),he=Z(()=>l.displayedCheckedKeysRef.value.includes(e.tmNode.key)),ge=Z(()=>{const{value:u}=Q;if(!u)return!1;const{value:N}=U,{tmNode:T}=e;return typeof N=="boolean"?!T.disabled&&N:N(e.tmNode.rawNode)});function ve(u){const{value:N}=l.expandOnClickRef,{value:T}=xe,{value:M}=ge;if(!T&&!N&&!M||Qe(u,"checkbox")||Qe(u,"switcher"))return;const{tmNode:W}=e;T&&l.handleSelect(W),N&&!W.isLeaf&&X(),M&&Y(!he.value)}function we(u){var N,T;if(!(Qe(u,"checkbox")||Qe(u,"switcher"))){if(!C.value){const M=K.value;let W=!1;if(M)switch(M({option:e.tmNode.rawNode})){case"toggleCheck":W=!0,Y(!he.value);break;case"toggleSelect":W=!0,l.handleSelect(e.tmNode);break;case"toggleExpand":W=!0,X(),W=!0;break;case"none":W=!0,W=!0;return}W||ve(u)}(T=(N=O.value)===null||N===void 0?void 0:N.onClick)===null||T===void 0||T.call(N,u)}}function Ue(u){S.value||we(u)}function ee(u){S.value&&we(u)}function Y(u){l.handleCheck(e.tmNode,u)}function ye(u){l.handleDragStart({event:u,node:e.tmNode})}function $e(u){u.currentTarget===u.target&&l.handleDragEnter({event:u,node:e.tmNode})}function ne(u){u.preventDefault(),l.handleDragOver({event:u,node:e.tmNode})}function be(u){l.handleDragEnd({event:u,node:e.tmNode})}function Te(u){u.currentTarget===u.target&&l.handleDragLeave({event:u,node:e.tmNode})}function Me(u){u.preventDefault(),s.value!==null&&l.handleDrop({event:u,node:e.tmNode,dropPosition:s.value})}const pe=E(()=>{const{clsPrefix:u}=e,{value:N}=w;if(_.value){const T=[];let M=e.tmNode.parent;for(;M;)M.isLastChild?T.push(g("div",{class:`${u}-tree-node-indent`},g("div",{style:{width:`${N}px`}}))):T.push(g("div",{class:[`${u}-tree-node-indent`,`${u}-tree-node-indent--show-line`]},g("div",{style:{width:`${N}px`}}))),M=M.parent;return T.reverse()}else return ut(e.tmNode.level,g("div",{class:`${e.clsPrefix}-tree-node-indent`},g("div",{style:{width:`${N}px`}})))});return{showDropMark:Z(()=>{const{value:u}=i;if(!u)return;const{value:N}=s;if(!N)return;const{value:T}=c;if(!T)return;const{tmNode:M}=e;return M.key===T.key}),showDropMarkAsParent:Z(()=>{const{value:u}=r;if(!u)return!1;const{tmNode:N}=e,{value:T}=s;return T==="before"||T==="after"?u.key===N.key:!1}),pending:Z(()=>l.pendingNodeKeyRef.value===e.tmNode.key),loading:Z(()=>l.loadingKeysRef.value.has(e.tmNode.key)),highlight:Z(()=>{var u;return(u=l.highlightKeySetRef.value)===null||u===void 0?void 0:u.has(e.tmNode.key)}),checked:he,indeterminate:Z(()=>l.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Z(()=>l.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Z(()=>l.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:C,checkable:Q,mergedCheckOnClick:ge,checkboxDisabled:b,selectable:xe,expandOnClick:l.expandOnClickRef,internalScrollable:l.internalScrollableRef,draggable:l.draggableRef,blockLine:S,nodeProps:O,checkboxFocusable:l.internalCheckboxFocusableRef,droppingPosition:s,droppingOffsetLevel:k,indent:w,checkboxPlacement:x,showLine:_,contentInstRef:H,contentElRef:q,indentNodes:pe,handleCheck:Y,handleDrop:Me,handleDragStart:ye,handleDragEnter:$e,handleDragOver:ne,handleDragEnd:be,handleDragLeave:Te,handleLineClick:ee,handleContentClick:Ue,handleSwitcherClick:X}},render(){const{tmNode:e,clsPrefix:l,checkable:r,expandOnClick:c,selectable:i,selected:s,checked:k,highlight:y,draggable:w,blockLine:S,indent:x,indentNodes:U,disabled:R,pending:_,internalScrollable:D,nodeProps:K,checkboxPlacement:b}=this,v=w&&!R?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,C=D?jn(e.key):void 0,O=b==="right",H=r?g(_t,{indent:x,right:O,focusable:this.checkboxFocusable,disabled:R||this.checkboxDisabled,clsPrefix:l,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return g("div",Object.assign({class:`${l}-tree-node-wrapper`},v),g("div",Object.assign({},S?K:void 0,{class:[`${l}-tree-node`,{[`${l}-tree-node--selected`]:s,[`${l}-tree-node--checkable`]:r,[`${l}-tree-node--highlight`]:y,[`${l}-tree-node--pending`]:_,[`${l}-tree-node--disabled`]:R,[`${l}-tree-node--selectable`]:i,[`${l}-tree-node--clickable`]:i||c||this.mergedCheckOnClick},K==null?void 0:K.class],"data-key":C,draggable:w&&S,onClick:this.handleLineClick,onDragstart:w&&S&&!R?this.handleDragStart:void 0}),U,e.isLeaf&&this.showLine?g("div",{class:[`${l}-tree-node-indent`,`${l}-tree-node-indent--show-line`,e.isLeaf&&`${l}-tree-node-indent--is-leaf`,e.isLastChild&&`${l}-tree-node-indent--last-child`]},g("div",{style:{width:`${x}px`}})):g(It,{clsPrefix:l,expanded:this.expanded,selected:s,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:x,onClick:this.handleSwitcherClick}),O?null:H,g(Ut,{ref:"contentInstRef",clsPrefix:l,checked:k,selected:s,onClick:this.handleContentClick,nodeProps:S?void 0:K,onDragstart:w&&!S&&!R?this.handleDragStart:void 0,tmNode:e}),w?this.showDropMark?On({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:x}):this.showDropMarkAsParent?On({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:x}):null:null,O?H:null))}}),Hn=zt;function Vt({props:e,fNodesRef:l,mergedExpandedKeysRef:r,mergedSelectedKeysRef:c,mergedCheckedKeysRef:i,handleCheck:s,handleSelect:k,handleSwitcherClick:y}){const{value:w}=c,S=_e(Rn,null),x=S?S.pendingNodeKeyRef:A(w.length?w[w.length-1]:null);function U(R){var _;if(!e.keyboard)return{enterBehavior:null};const{value:D}=x;let K=null;if(D===null){if((R.key==="ArrowDown"||R.key==="ArrowUp")&&R.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(R.key)&&D===null){const{value:b}=l;let v=0;for(;v<b.length;){if(!b[v].disabled){x.value=b[v].key;break}v+=1}}}else{const{value:b}=l;let v=b.findIndex(C=>C.key===D);if(!~v)return{enterBehavior:null};if(R.key==="Enter"){const C=b[v];switch(K=((_=e.overrideDefaultNodeClickBehavior)===null||_===void 0?void 0:_.call(e,{option:C.rawNode}))||null,K){case"toggleCheck":s(C,!i.value.includes(C.key));break;case"toggleSelect":k(C);break;case"toggleExpand":y(C);break;case"none":break;case"default":default:K="default",k(C)}}else if(R.key==="ArrowDown")for(R.preventDefault(),v+=1;v<b.length;){if(!b[v].disabled){x.value=b[v].key;break}v+=1}else if(R.key==="ArrowUp")for(R.preventDefault(),v-=1;v>=0;){if(!b[v].disabled){x.value=b[v].key;break}v-=1}else if(R.key==="ArrowLeft"){const C=b[v];if(C.isLeaf||!r.value.includes(D)){const O=C.getParent();O&&(x.value=O.key)}else y(C)}else if(R.key==="ArrowRight"){const C=b[v];if(C.isLeaf)return{enterBehavior:null};if(!r.value.includes(D))y(C);else for(v+=1;v<b.length;){if(!b[v].disabled){x.value=b[v].key;break}v+=1}}}return{enterBehavior:K}}return{pendingNodeKeyRef:x,handleKeydown:U}}const Ht=Ke({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return g(ft,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>g("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:In(this.height)}},this.nodes.map(l=>g(Hn,{clsPrefix:e,tmNode:l})))})}}),xn=ht(),qt=I("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ue("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ue(">",[I("tree-node",[ue("&:first-child","margin-top: 0;")])]),I("tree-motion-wrapper",[V("expand",[Dn({duration:"0.2s"})]),V("collapse",[Dn({duration:"0.2s",reverse:!0})])]),I("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),I("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[V("highlight",[I("tree-node-content",[Ne("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),V("disabled",[I("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ie("disabled",[V("clickable",[I("tree-node-content",`
 cursor: pointer;
 `)])])]),V("block-node",[I("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ie("block-line",[I("tree-node",[Ie("disabled",[I("tree-node-content",[ue("&:hover","background: var(--n-node-color-hover);")]),V("selectable",[I("tree-node-content",[ue("&:active","background: var(--n-node-color-pressed);")])]),V("pending",[I("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),V("selected",[I("tree-node-content","background: var(--n-node-color-active);")])]),V("selected",[I("tree-node-content","background: var(--n-node-color-active);")])])]),V("block-line",[I("tree-node",[Ie("disabled",[ue("&:hover","background: var(--n-node-color-hover);"),V("pending",`
 background: var(--n-node-color-hover);
 `),V("selectable",[Ie("selected",[ue("&:active","background: var(--n-node-color-pressed);")])]),V("selected","background: var(--n-node-color-active);")]),V("selected","background: var(--n-node-color-active);"),V("disabled",`
 cursor: not-allowed;
 `)])]),I("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[V("show-line","position: relative",[ue("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),V("last-child",[ue("&::before",`
 bottom: 50%;
 `)]),V("is-leaf",[ue("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Ie("show-line","height: 0;")]),I("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Ne("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[I("icon",[xn]),I("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[xn]),I("base-icon",[xn])]),V("hide","visibility: hidden;"),V("expanded","transform: rotate(90deg);")]),I("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),I("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ue("&:last-child","margin-bottom: 0;"),Ne("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Ne("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Ne("suffix",`
 display: inline-flex;
 `)]),Ne("empty","margin: auto;")]);var Wt=globalThis&&globalThis.__awaiter||function(e,l,r,c){function i(s){return s instanceof r?s:new r(function(k){k(s)})}return new(r||(r=Promise))(function(s,k){function y(x){try{S(c.next(x))}catch(U){k(U)}}function w(x){try{S(c.throw(x))}catch(U){k(U)}}function S(x){x.done?s(x.value):i(x.value).then(y,w)}S((c=c.apply(e,l||[])).next())})};function qn(e,l,r,c){return{getIsGroup(){return!1},getKey(s){return s[e]},getChildren:c||(s=>s[l]),getDisabled(s){return!!(s[r]||s.checkboxDisabled)}}}const Wn={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},Gt=Object.assign(Object.assign(Object.assign(Object.assign({},dn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:$t},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Wn),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Xt=Ke({name:"Tree",props:Gt,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:r,mergedRtlRef:c}=_n(e),i=gt("Tree",c,l),s=dn("Tree","-tree",qt,En,e,l),k=A(null),y=A(null),w=A(null);function S(){var n;return(n=w.value)===null||n===void 0?void 0:n.listElRef}function x(){var n;return(n=w.value)===null||n===void 0?void 0:n.itemsElRef}const U=E(()=>{const{filter:n}=e;if(n)return n;const{labelField:a}=e;return(o,f)=>{if(!o.length)return!0;const h=f[a];return typeof h=="string"?h.toLowerCase().includes(o.toLowerCase()):!1}}),R=E(()=>{const{pattern:n}=e;return n?!n.length||!U.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:jt(e.data,U.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),_=E(()=>Un(e.showIrrelevantNodes?e.data:R.value.filteredTree,qn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),D=_e(Rn,null),K=e.internalTreeSelect?D.dataTreeMate:_,{watchProps:b}=e,v=A([]);b!=null&&b.includes("defaultCheckedKeys")?Xe(()=>{v.value=e.defaultCheckedKeys}):v.value=e.defaultCheckedKeys;const C=P(e,"checkedKeys"),O=Pe(C,v),H=E(()=>K.value.getCheckedKeys(O.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),q=zn(e),X=E(()=>H.value.checkedKeys),xe=E(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:H.value.indeterminateKeys}),Q=A([]);b!=null&&b.includes("defaultSelectedKeys")?Xe(()=>{Q.value=e.defaultSelectedKeys}):Q.value=e.defaultSelectedKeys;const he=P(e,"selectedKeys"),ge=Pe(he,Q),ve=A([]),we=n=>{ve.value=e.defaultExpandAll?K.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};b!=null&&b.includes("defaultExpandedKeys")?Xe(()=>{we(void 0)}):Xe(()=>{we(e.defaultExpandedKeys)});const Ue=P(e,"expandedKeys"),ee=Pe(Ue,ve),Y=E(()=>_.value.getFlattenedNodes(ee.value)),{pendingNodeKeyRef:ye,handleKeydown:$e}=Vt({props:e,mergedCheckedKeysRef:O,mergedSelectedKeysRef:ge,fNodesRef:Y,mergedExpandedKeysRef:ee,handleCheck:d,handleSelect:F,handleSwitcherClick:m});let ne=null,be=null;const Te=A(new Set),Me=E(()=>e.internalHighlightKeySet||R.value.highlightKeySet),pe=Pe(Me,Te),u=A(new Set),N=E(()=>ee.value.filter(n=>!u.value.has(n)));let T=0;const M=A(null),W=A(null),De=A(null),Fe=A(null),ae=A(0),je=E(()=>{const{value:n}=W;return n?n.parent:null});let ze=!1;on(P(e,"data"),()=>{ze=!0,rn(()=>{ze=!1}),u.value.clear(),ye.value=null,ke()},{deep:!1});let Ve=!1;const He=()=>{Ve=!0,rn(()=>{Ve=!1})};let oe;on(P(e,"pattern"),(n,a)=>{if(e.showIrrelevantNodes)if(oe=void 0,n){const{expandedKeys:o,highlightKeySet:f}=Mt(e.data,e.pattern,e.keyField,e.childrenField,U.value);Te.value=f,He(),Re(o,J(o),{node:null,action:"filter"})}else Te.value=new Set;else if(!n.length)oe!==void 0&&(He(),Re(oe,J(oe),{node:null,action:"filter"}));else{a.length||(oe=ee.value);const{expandedKeys:o}=R.value;o!==void 0&&(He(),Re(o,J(o),{node:null,action:"filter"}))}});function Ze(n){return Wt(this,void 0,void 0,function*(){const{onLoad:a}=e;if(!a){yield Promise.resolve();return}const{value:o}=u;if(!o.has(n.key)){o.add(n.key);try{(yield a(n.rawNode))===!1&&t()}catch(f){console.error(f),t()}o.delete(n.key)}})}Xe(()=>{var n;const{value:a}=_;if(!a)return;const{getNode:o}=a;(n=ee.value)===null||n===void 0||n.forEach(f=>{const h=o(f);h&&!h.shallowLoaded&&Ze(h)})});const Se=A(!1),me=A([]);on(N,(n,a)=>{if(!e.animated||Ve){rn(Oe);return}if(ze)return;const o=Ye(s.value.self.nodeHeight),f=new Set(a);let h=null,$=null;for(const B of n)if(!f.has(B)){if(h!==null)return;h=B}const le=new Set(n);for(const B of a)if(!le.has(B)){if($!==null)return;$=B}if(h===null&&$===null)return;const{virtualScroll:re}=e,Ae=(re?w.value.listElRef:k.value).offsetHeight,Ee=Math.ceil(Ae/o)+1;let se;if(h!==null&&(se=a),$!==null&&(se===void 0?se=n:se=se.filter(B=>B!==$)),Se.value=!0,me.value=_.value.getFlattenedNodes(se),h!==null){const B=me.value.findIndex(ce=>ce.key===h);if(~B){const ce=me.value[B].children;if(ce){const fe=Fn(ce,n);me.value.splice(B+1,0,{__motion:!0,mode:"expand",height:re?fe.length*o:void 0,nodes:re?fe.slice(0,Ee):fe})}}}if($!==null){const B=me.value.findIndex(ce=>ce.key===$);if(~B){const ce=me.value[B].children;if(!ce)return;Se.value=!0;const fe=Fn(ce,n);me.value.splice(B+1,0,{__motion:!0,mode:"collapse",height:re?fe.length*o:void 0,nodes:re?fe.slice(0,Ee):fe})}}});const sn=E(()=>vt(Y.value)),cn=E(()=>Se.value?me.value:Y.value);function Oe(){const{value:n}=y;n&&n.sync()}function un(){Se.value=!1,e.virtualScroll&&rn(Oe)}function J(n){const{getNode:a}=K.value;return n.map(o=>{var f;return((f=a(o))===null||f===void 0?void 0:f.rawNode)||null})}function Re(n,a,o){const{"onUpdate:expandedKeys":f,onUpdateExpandedKeys:h}=e;ve.value=n,f&&j(f,n,a,o),h&&j(h,n,a,o)}function qe(n,a,o){const{"onUpdate:checkedKeys":f,onUpdateCheckedKeys:h}=e;v.value=n,h&&j(h,n,a,o),f&&j(f,n,a,o)}function fn(n,a){const{"onUpdate:indeterminateKeys":o,onUpdateIndeterminateKeys:f}=e;o&&j(o,n,a),f&&j(f,n,a)}function We(n,a,o){const{"onUpdate:selectedKeys":f,onUpdateSelectedKeys:h}=e;Q.value=n,h&&j(h,n,a,o),f&&j(f,n,a,o)}function hn(n){const{onDragenter:a}=e;a&&j(a,n)}function gn(n){const{onDragleave:a}=e;a&&j(a,n)}function en(n){const{onDragend:a}=e;a&&j(a,n)}function vn(n){const{onDragstart:a}=e;a&&j(a,n)}function nn(n){const{onDragover:a}=e;a&&j(a,n)}function yn(n){const{onDrop:a}=e;a&&j(a,n)}function ke(){tn(),te()}function tn(){M.value=null}function te(){ae.value=0,W.value=null,De.value=null,Fe.value=null,t()}function t(){ne&&(window.clearTimeout(ne),ne=null),be=null}function d(n,a){if(e.disabled||Ce(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){F(n);return}const o=a?"check":"uncheck",{checkedKeys:f,indeterminateKeys:h}=K.value[o](n.key,X.value,{cascade:e.cascade,checkStrategy:q.value,allowNotLoaded:e.allowCheckingNotLoaded});qe(f,J(f),{node:n.rawNode,action:o}),fn(h,J(h))}function p(n){if(e.disabled)return;const{key:a}=n,{value:o}=ee,f=o.findIndex(h=>h===a);if(~f){const h=Array.from(o);h.splice(f,1),Re(h,J(h),{node:n.rawNode,action:"collapse"})}else{const h=_.value.getNode(a);if(!h||h.isLeaf)return;let $;if(e.accordion){const le=new Set(n.siblings.map(({key:re})=>re));$=o.filter(re=>!le.has(re)),$.push(a)}else $=o.concat(a);Re($,J($),{node:n.rawNode,action:"expand"})}}function m(n){e.disabled||Se.value||p(n)}function F(n){if(!(e.disabled||!e.selectable)){if(ye.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:a,indeterminateKeys:o}}=H;e.multiple?d(n,!(a.includes(n.key)||o.includes(n.key))):qe([n.key],J([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const a=Array.from(ge.value),o=a.findIndex(f=>f===n.key);~o?e.cancelable&&a.splice(o,1):~o||a.push(n.key),We(a,J(a),{node:n.rawNode,action:~o?"unselect":"select"})}else ge.value.includes(n.key)?e.cancelable&&We([],[],{node:n.rawNode,action:"unselect"}):We([n.key],J([n.key]),{node:n.rawNode,action:"select"})}}function z(n){if(ne&&(window.clearTimeout(ne),ne=null),n.isLeaf)return;be=n.key;const a=()=>{if(be!==n.key)return;const{value:o}=De;if(o&&o.key===n.key&&!ee.value.includes(n.key)){const f=ee.value.concat(n.key);Re(f,J(f),{node:n.rawNode,action:"expand"})}ne=null,be=null};n.shallowLoaded?ne=window.setTimeout(()=>{a()},1e3):ne=window.setTimeout(()=>{Ze(n).then(()=>{a()})},1e3)}function de({event:n,node:a}){!e.draggable||e.disabled||Ce(a,e.disabledField)||(Cn({event:n,node:a},!1),hn({event:n,node:a.rawNode}))}function ie({event:n,node:a}){!e.draggable||e.disabled||Ce(a,e.disabledField)||gn({event:n,node:a.rawNode})}function ln(n){n.target===n.currentTarget&&te()}function Ge({event:n,node:a}){ke(),!(!e.draggable||e.disabled||Ce(a,e.disabledField))&&en({event:n,node:a.rawNode})}function Gn({event:n,node:a}){!e.draggable||e.disabled||Ce(a,e.disabledField)||(T=n.clientX,M.value=a,vn({event:n,node:a.rawNode}))}function Cn({event:n,node:a},o=!0){var f;if(!e.draggable||e.disabled||Ce(a,e.disabledField))return;const{value:h}=M;if(!h)return;const{allowDrop:$,indent:le}=e;o&&nn({event:n,node:a.rawNode});const re=n.currentTarget,{height:Ae,top:Ee}=re.getBoundingClientRect(),se=n.clientY-Ee;let B;$({node:a.rawNode,dropPosition:"inside",phase:"drag"})?se<=8?B="before":se>=Ae-8?B="after":B="inside":se<=Ae/2?B="before":B="after";const{value:fe}=sn;let L,G;const Be=fe(a.key);if(Be===null){te();return}let an=!1;B==="inside"?(L=a,G="inside"):B==="before"?a.isFirstChild?(L=a,G="before"):(L=Y.value[Be-1],G="after"):(L=a,G="after"),!L.isLeaf&&ee.value.includes(L.key)&&(an=!0,G==="after"&&(L=Y.value[Be+1],L?G="before":(L=a,G="inside")));const Kn=L;if(De.value=Kn,!an&&h.isLastChild&&h.key===L.key&&(G="after"),G==="after"){let Tn=T-n.clientX,bn=0;for(;Tn>=le/2&&L.parent!==null&&L.isLastChild&&bn<1;)Tn-=le,bn+=1,L=L.parent;ae.value=bn}else ae.value=0;if((h.contains(L)||G==="inside"&&((f=h.parent)===null||f===void 0?void 0:f.key)===L.key)&&!(h.key===Kn.key&&h.key===L.key)){te();return}if(!$({node:L.rawNode,dropPosition:G,phase:"drag"})){te();return}if(h.key===L.key)t();else if(be!==L.key)if(G==="inside"){if(e.expandOnDragenter){if(z(L),!L.shallowLoaded&&be!==L.key){ke();return}}else if(!L.shallowLoaded){ke();return}}else t();else G!=="inside"&&t();Fe.value=G,W.value=L}function Xn({event:n,node:a,dropPosition:o}){if(!e.draggable||e.disabled||Ce(a,e.disabledField))return;const{value:f}=M,{value:h}=W,{value:$}=Fe;if(!(!f||!h||!$)&&e.allowDrop({node:h.rawNode,dropPosition:$,phase:"drag"})&&f.key!==h.key){if($==="before"){const le=f.getNext({includeDisabled:!0});if(le&&le.key===h.key){te();return}}if($==="after"){const le=f.getPrev({includeDisabled:!0});if(le&&le.key===h.key){te();return}}yn({event:n,node:h.rawNode,dragNode:f.rawNode,dropPosition:o}),ke()}}function Yn(){Oe()}function Qn(){Oe()}function Jn(n){var a;if(e.virtualScroll||e.internalScrollable){const{value:o}=y;if(!((a=o==null?void 0:o.containerRef)===null||a===void 0)&&a.contains(n.relatedTarget))return;ye.value=null}else{const{value:o}=k;if(o!=null&&o.contains(n.relatedTarget))return;ye.value=null}}on(ye,n=>{var a,o;if(n!==null){if(e.virtualScroll)(a=w.value)===null||a===void 0||a.scrollTo({key:n});else if(e.internalScrollable){const{value:f}=y;if(f===null)return;const h=(o=f.contentRef)===null||o===void 0?void 0:o.querySelector(`[data-key="${jn(n)}"]`);if(!h)return;f.scrollTo({el:h})}}}),$n(Je,{loadingKeysRef:u,highlightKeySetRef:pe,displayedCheckedKeysRef:X,displayedIndeterminateKeysRef:xe,mergedSelectedKeysRef:ge,mergedExpandedKeysRef:ee,mergedThemeRef:s,mergedCheckStrategyRef:q,nodePropsRef:P(e,"nodeProps"),disabledRef:P(e,"disabled"),checkableRef:P(e,"checkable"),selectableRef:P(e,"selectable"),expandOnClickRef:P(e,"expandOnClick"),onLoadRef:P(e,"onLoad"),draggableRef:P(e,"draggable"),blockLineRef:P(e,"blockLine"),indentRef:P(e,"indent"),cascadeRef:P(e,"cascade"),checkOnClickRef:P(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:De,droppingNodeParentRef:je,draggingNodeRef:M,droppingPositionRef:Fe,droppingOffsetLevelRef:ae,fNodesRef:Y,pendingNodeKeyRef:ye,showLineRef:P(e,"showLine"),disabledFieldRef:P(e,"disabledField"),internalScrollableRef:P(e,"internalScrollable"),internalCheckboxFocusableRef:P(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:P(e,"renderLabel"),renderPrefixRef:P(e,"renderPrefix"),renderSuffixRef:P(e,"renderSuffix"),renderSwitcherIconRef:P(e,"renderSwitcherIcon"),labelFieldRef:P(e,"labelField"),multipleRef:P(e,"multiple"),overrideDefaultNodeClickBehaviorRef:P(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:m,handleDragEnd:Ge,handleDragEnter:de,handleDragLeave:ie,handleDragStart:Gn,handleDrop:Xn,handleDragOver:Cn,handleSelect:F,handleCheck:d});function Zn(n,a){var o,f;typeof n=="number"?(o=w.value)===null||o===void 0||o.scrollTo(n,a||0):(f=w.value)===null||f===void 0||f.scrollTo(n)}const et={handleKeydown:$e,scrollTo:Zn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=H.value;return{keys:n,options:J(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=H.value;return{keys:n,options:J(n)}}},Nn=E(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:a,nodeBorderRadius:o,nodeColorHover:f,nodeColorPressed:h,nodeColorActive:$,arrowColor:le,loadingColor:re,nodeTextColor:Ae,nodeTextColorDisabled:Ee,dropMarkColor:se,nodeWrapperPadding:B,nodeHeight:ce,lineHeight:fe,lineColor:L}}=s.value,G=kn(B,"top"),Be=kn(B,"bottom"),an=In(Ye(ce)-Ye(G)-Ye(Be));return{"--n-arrow-color":le,"--n-loading-color":re,"--n-bezier":n,"--n-font-size":a,"--n-node-border-radius":o,"--n-node-color-active":$,"--n-node-color-hover":f,"--n-node-color-pressed":h,"--n-node-text-color":Ae,"--n-node-text-color-disabled":Ee,"--n-drop-mark-color":se,"--n-node-wrapper-padding":B,"--n-line-offset-top":`-${G}`,"--n-line-offset-bottom":`-${Be}`,"--n-node-content-height":an,"--n-line-height":fe,"--n-line-color":L}}),Le=r?Mn("tree",void 0,Nn,e):void 0;return Object.assign(Object.assign({},et),{mergedClsPrefix:l,mergedTheme:s,rtlEnabled:i,fNodes:cn,aip:Se,selfElRef:k,virtualListInstRef:w,scrollbarInstRef:y,handleFocusout:Jn,handleDragLeaveTree:ln,handleScroll:Yn,getScrollContainer:S,getScrollContent:x,handleAfterEnter:un,handleResize:Qn,cssVars:r?void 0:Nn,themeClass:Le==null?void 0:Le.themeClass,onRender:Le==null?void 0:Le.onRender})},render(){var e;const{fNodes:l,internalRenderEmpty:r}=this;if(!l.length&&r)return r();const{mergedClsPrefix:c,blockNode:i,blockLine:s,draggable:k,disabled:y,internalFocusable:w,checkable:S,handleKeydown:x,rtlEnabled:U,handleFocusout:R,scrollbarProps:_}=this,D=w&&!y,K=D?"0":void 0,b=[`${c}-tree`,U&&`${c}-tree--rtl`,S&&`${c}-tree--checkable`,(s||i)&&`${c}-tree--block-node`,s&&`${c}-tree--block-line`],v=O=>"__motion"in O?g(Ht,{height:O.height,nodes:O.nodes,clsPrefix:c,mode:O.mode,onAfterEnter:this.handleAfterEnter}):g(Hn,{key:O.key,tmNode:O,clsPrefix:c});if(this.virtualScroll){const{mergedTheme:O,internalScrollablePadding:H}=this,q=kn(H||"0");return g(Pn,Object.assign({},_,{ref:"scrollbarInstRef",onDragleave:k?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:b,theme:O.peers.Scrollbar,themeOverrides:O.peerOverrides.Scrollbar,tabindex:K,onKeydown:D?x:void 0,onFocusout:D?R:void 0}),{default:()=>{var X;return(X=this.onRender)===null||X===void 0||X.call(this),l.length?g(yt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Ye(O.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:q.top,paddingBottom:q.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:q.left,paddingRight:q.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:xe})=>v(xe)}):wn(this.$slots.empty,()=>[g(pn,{class:`${c}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:C}=this;return b.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),C?g(Pn,Object.assign({},_,{class:b,tabindex:K,onKeydown:D?x:void 0,onFocusout:D?R:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>g("div",{onDragleave:k?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(v))}):g("div",{class:b,tabindex:K,ref:"selfElRef",style:this.cssVars,onKeydown:D?x:void 0,onFocusout:D?R:void 0,onDragleave:k?this.handleDragLeaveTree:void 0},l.length?l.map(v):wn(this.$slots.empty,()=>[g(pn,{class:`${c}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}});function Ln(e,l){const{rawNode:r}=e;return Object.assign(Object.assign({},r),{label:r[l],value:e.key})}function An(e,l,r,c){const{rawNode:i}=e;return Object.assign(Object.assign({},i),{value:e.key,label:l.map(s=>s.rawNode[c]).join(r)})}const Yt=ue([I("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),I("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 transition: box-shadow .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-menu-border-radius);
 box-shadow: var(--n-menu-box-shadow);
 background-color: var(--n-menu-color);
 outline: none;
 `,[I("tree","max-height: var(--n-menu-height);"),Ne("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Ne("action",`
 padding: var(--n-action-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),bt()])]),Qt=Object.assign(Object.assign(Object.assign(Object.assign({},dn.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},loading:Boolean,maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:Sn.propTo,menuProps:Object,virtualScroll:{type:Boolean,default:!0},status:String,renderTag:Function,ellipsisTagPopoverProps:Object}),Wn),{renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,watchProps:Array,getChildren:Function,onBlur:Function,onFocus:Function,onLoad:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:Boolean}),Zt=Ke({name:"TreeSelect",props:Qt,setup(e){const l=A(null),r=A(null),c=A(null),i=A(null),{mergedClsPrefixRef:s,namespaceRef:k,inlineThemeDisabled:y}=_n(e),{localeRef:w}=mt("Select"),{mergedSizeRef:S,mergedDisabledRef:x,mergedStatusRef:U,nTriggerFormBlur:R,nTriggerFormChange:_,nTriggerFormFocus:D,nTriggerFormInput:K}=kt(e),b=A(e.defaultValue),v=P(e,"value"),C=Pe(v,b),O=A(e.defaultShow),H=P(e,"show"),q=Pe(H,O),X=A(""),xe=E(()=>{const{filter:t}=e;if(t)return t;const{labelField:d}=e;return(p,m)=>p.length?m[d].toLowerCase().includes(p.toLowerCase()):!0}),Q=E(()=>Un(e.options,qn(e.keyField,e.childrenField,e.disabledField,void 0))),{value:he}=C,ge=A(e.checkable?null:Array.isArray(he)&&he.length?he[he.length-1]:null),ve=E(()=>e.multiple&&e.cascade&&e.checkable),we=A(e.defaultExpandAll?void 0:e.defaultExpandedKeys||e.expandedKeys),Ue=P(e,"expandedKeys"),ee=Pe(Ue,we),Y=A(!1),ye=E(()=>{const{placeholder:t}=e;return t!==void 0?t:w.value.placeholder}),$e=E(()=>e.checkable?[]:ne.value),ne=E(()=>{const{value:t}=C;return e.multiple?Array.isArray(t)?t:[]:t===null||Array.isArray(t)?[]:[t]}),be=E(()=>{const{multiple:t,showPath:d,separator:p,labelField:m}=e;if(t)return null;const{value:F}=C;if(!Array.isArray(F)&&F!==null){const{value:z}=Q,de=z.getNode(F);if(de!==null)return d?An(de,z.getPath(F).treeNodePath,p,m):Ln(de,m)}return null}),Te=E(()=>{const{multiple:t,showPath:d,separator:p}=e;if(!t)return null;const{value:m}=C;if(Array.isArray(m)){const F=[],{value:z}=Q,{checkedKeys:de}=z.getCheckedKeys(m,{checkStrategy:e.checkStrategy,cascade:ve.value,allowNotLoaded:e.allowCheckingNotLoaded}),{labelField:ie}=e;return de.forEach(ln=>{const Ge=z.getNode(ln);Ge!==null&&F.push(d?An(Ge,z.getPath(ln).treeNodePath,p,ie):Ln(Ge,ie))}),F}return[]}),Me=E(()=>{const{self:{menuPadding:t}}=ke.value;return t});function pe(){var t;(t=r.value)===null||t===void 0||t.focus()}function u(){var t;(t=r.value)===null||t===void 0||t.focusInput()}function N(t){const{onUpdateShow:d,"onUpdate:show":p}=e;d&&j(d,t),p&&j(p,t),O.value=t}function T(t,d,p){const{onUpdateValue:m,"onUpdate:value":F}=e;m&&j(m,t,d,p),F&&j(F,t,d,p),b.value=t,K(),_()}function M(t,d){const{onUpdateIndeterminateKeys:p,"onUpdate:indeterminateKeys":m}=e;p&&j(p,t,d),m&&j(m,t,d)}function W(t,d,p){const{onUpdateExpandedKeys:m,"onUpdate:expandedKeys":F}=e;m&&j(m,t,d,p),F&&j(F,t,d,p),we.value=t}function De(t){const{onFocus:d}=e;d&&d(t),D()}function Fe(t){ae();const{onBlur:d}=e;d&&d(t),R()}function ae(){N(!1)}function je(){x.value||(X.value="",N(!0),e.filterable&&u())}function ze(){X.value=""}function Ve(t){var d;q.value&&(!((d=r.value)===null||d===void 0)&&d.$el.contains(Pt(t))||ae())}function He(){x.value||(q.value?e.filterable||ae():je())}function oe(t){const{value:{getNode:d}}=Q;return t.map(p=>{var m;return((m=d(p))===null||m===void 0?void 0:m.rawNode)||null})}function Ze(t,d,p){const m=oe(t),F=p.action==="check"?"select":"unselect",z=p.node;e.multiple?(T(t,m,{node:z,action:F}),e.filterable&&(u(),e.clearFilterAfterSelect&&(X.value=""))):(t.length?T(t[0],m[0]||null,{node:z,action:F}):T(null,null,{node:z,action:F}),ae(),pe())}function Se(t){e.checkable&&M(t,oe(t))}function me(t){var d;!((d=i.value)===null||d===void 0)&&d.contains(t.relatedTarget)||(Y.value=!0,De(t))}function sn(t){var d;!((d=i.value)===null||d===void 0)&&d.contains(t.relatedTarget)||(Y.value=!1,Fe(t))}function cn(t){var d,p,m;!((d=i.value)===null||d===void 0)&&d.contains(t.relatedTarget)||!((m=(p=r.value)===null||p===void 0?void 0:p.$el)===null||m===void 0)&&m.contains(t.relatedTarget)||(Y.value=!0,De(t))}function Oe(t){var d,p,m;!((d=i.value)===null||d===void 0)&&d.contains(t.relatedTarget)||!((m=(p=r.value)===null||p===void 0?void 0:p.$el)===null||m===void 0)&&m.contains(t.relatedTarget)||(Y.value=!1,Fe(t))}function un(t){t.stopPropagation();const{multiple:d}=e;!d&&e.filterable&&ae(),d?T([],[],{node:null,action:"clear"}):T(null,null,{node:null,action:"clear"})}function J(t){const{value:d}=C;if(Array.isArray(d)){const{value:p}=Q,{checkedKeys:m}=p.getCheckedKeys(d,{cascade:ve.value,allowNotLoaded:e.allowCheckingNotLoaded}),F=m.findIndex(z=>z===t.value);if(~F){const z=m[F],de=oe([z])[0];if(e.checkable){const{checkedKeys:ie}=p.uncheck(t.value,m,{checkStrategy:e.checkStrategy,cascade:ve.value,allowNotLoaded:e.allowCheckingNotLoaded});T(ie,oe(ie),{node:de,action:"delete"})}else{const ie=Array.from(m);ie.splice(F,1),T(ie,oe(ie),{node:de,action:"delete"})}}}}function Re(t){const{value:d}=t.target;X.value=d}function qe(t){const{value:d}=c;return d?d.handleKeydown(t):{enterBehavior:null}}function fn(t){if(t.key==="Enter"){if(q.value){const{enterBehavior:d}=qe(t);if(!e.multiple)switch(d){case"default":case"toggleSelect":ae(),pe();break}}else je();t.preventDefault()}else t.key==="Escape"?q.value&&(Ot(t),ae(),pe()):q.value?qe(t):t.key==="ArrowDown"&&je()}function We(){ae(),pe()}function hn(t){Qe(t,"action")||t.preventDefault()}const gn=E(()=>{const{renderTag:t}=e;if(t)return function({option:p,handleClose:m}){const{value:F}=p;if(F!==void 0){const z=Q.value.getNode(F);if(z)return t({option:z.rawNode,handleClose:m})}return F}});$n(Rn,{pendingNodeKeyRef:ge,dataTreeMate:Q});function en(){var t;q.value&&((t=l.value)===null||t===void 0||t.syncPosition())}xt(i,en);const vn=zn(e),nn=E(()=>{if(e.checkable){const t=C.value;return e.multiple&&Array.isArray(t)?Q.value.getCheckedKeys(t,{cascade:e.cascade,checkStrategy:vn.value,allowNotLoaded:e.allowCheckingNotLoaded}):{checkedKeys:Array.isArray(t)||t===null?[]:[t],indeterminateKeys:[]}}return{checkedKeys:[],indeterminateKeys:[]}}),yn={getCheckedData:()=>{const{checkedKeys:t}=nn.value;return{keys:t,options:oe(t)}},getIndeterminateData:()=>{const{indeterminateKeys:t}=nn.value;return{keys:t,options:oe(t)}},focus:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.focus()},focusInput:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.focusInput()},blur:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.blur()},blurInput:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.blurInput()}},ke=dn("TreeSelect","-tree-select",Yt,Bt,e,s),tn=E(()=>{const{common:{cubicBezierEaseInOut:t},self:{menuBoxShadow:d,menuBorderRadius:p,menuColor:m,menuHeight:F,actionPadding:z,actionDividerColor:de,actionTextColor:ie}}=ke.value;return{"--n-menu-box-shadow":d,"--n-menu-border-radius":p,"--n-menu-color":m,"--n-menu-height":F,"--n-bezier":t,"--n-action-padding":z,"--n-action-text-color":ie,"--n-action-divider-color":de}}),te=y?Mn("tree-select",void 0,tn,e):void 0;return Object.assign(Object.assign({},yn),{menuElRef:i,mergedStatus:U,triggerInstRef:r,followerInstRef:l,treeInstRef:c,mergedClsPrefix:s,mergedValue:C,mergedShow:q,namespace:k,adjustedTo:Sn(e),isMounted:wt(),focused:Y,menuPadding:Me,mergedPlaceholder:ye,mergedExpandedKeys:ee,treeSelectedKeys:$e,treeCheckedKeys:ne,mergedSize:S,mergedDisabled:x,selectedOption:be,selectedOptions:Te,pattern:X,pendingNodeKey:ge,mergedCascade:ve,mergedFilter:xe,selectionRenderTag:gn,handleTriggerOrMenuResize:en,doUpdateExpandedKeys:W,handleMenuLeave:ze,handleTriggerClick:He,handleMenuClickoutside:Ve,handleUpdateCheckedKeys:Ze,handleUpdateIndeterminateKeys:Se,handleTriggerFocus:me,handleTriggerBlur:sn,handleMenuFocusin:cn,handleMenuFocusout:Oe,handleClear:un,handleDeleteOption:J,handlePatternInput:Re,handleKeydown:fn,handleTabOut:We,handleMenuMousedown:hn,mergedTheme:ke,cssVars:y?void 0:tn,themeClass:te==null?void 0:te.themeClass,onRender:te==null?void 0:te.onRender})},render(){const{mergedTheme:e,mergedClsPrefix:l,$slots:r}=this;return g("div",{class:`${l}-tree-select`},g(pt,null,{default:()=>[g(St,null,{default:()=>g(Rt,{ref:"triggerInstRef",onResize:this.handleTriggerOrMenuResize,status:this.mergedStatus,focused:this.focused,clsPrefix:l,theme:e.peers.InternalSelection,themeOverrides:e.peerOverrides.InternalSelection,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,renderTag:this.selectionRenderTag,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,loading:this.loading,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown},{arrow:()=>{var c,i;return[(i=(c=this.$slots).arrow)===null||i===void 0?void 0:i.call(c)]}})}),g(Ct,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Sn.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>g(Nt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{var c;if(!this.mergedShow)return null;const{mergedClsPrefix:i,checkable:s,multiple:k,menuProps:y,options:w}=this;return(c=this.onRender)===null||c===void 0||c.call(this),Kt(g("div",Object.assign({},y,{class:[`${i}-tree-select-menu`,y==null?void 0:y.class,this.themeClass],ref:"menuElRef",style:[(y==null?void 0:y.style)||"",this.cssVars],tabindex:0,onMousedown:this.handleMenuMousedown,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout}),g(Xt,{ref:"treeInstRef",blockLine:!0,allowCheckingNotLoaded:this.allowCheckingNotLoaded,showIrrelevantNodes:!1,animated:!1,pattern:this.pattern,getChildren:this.getChildren,filter:this.mergedFilter,data:w,cancelable:k,labelField:this.labelField,keyField:this.keyField,disabledField:this.disabledField,childrenField:this.childrenField,theme:e.peers.Tree,themeOverrides:e.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:s,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,renderLabel:this.renderLabel,renderPrefix:this.renderPrefix,renderSuffix:this.renderSuffix,renderSwitcherIcon:this.renderSwitcherIcon,nodeProps:this.nodeProps,watchProps:this.watchProps,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,overrideDefaultNodeClickBehavior:this.overrideDefaultNodeClickBehavior,internalTreeSelect:!0,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,internalRenderEmpty:()=>g("div",{class:`${i}-tree-select-menu__empty`},wn(r.empty,()=>[g(pn,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty})])),onLoad:this.onLoad,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}),Dt(r.action,S=>S?g("div",{class:`${i}-tree-select-menu__action`,"data-action":!0},S):null),g(Ft,{onFocus:this.handleTabOut})),[[Tt,this.handleMenuClickoutside,void 0,{capture:!0}]])}})})]}))}});export{Xt as N,Zt as _};
