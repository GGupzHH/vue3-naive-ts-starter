import{u as N}from"./index-a2260535.js";import{g as m,E as x,r as o,bs as C,l as z,aa as M,S as I,U as D,A as P,B as R,I as i,J as u,K as t,D as B,G as U,ad as E,ae as O,aD as V,aE as G}from"./index-c17896f8.js";import{a as T,_ as $}from"./FormItem-af78cc3d.js";import{_ as q}from"./DataTable-19a8255a.js";import"./Forward-600c26c3.js";const A={class:"wrap-monitor-alarm h-full flex-col"},J={class:"whitespace-pre-wrap"},K=m({name:"MonitorSOPMonitoring"}),X=m({...K,setup(j){var d;(d=x())==null||d.proxy;const g=N(),_=o([]),l=o({deviceName:""});o([{label:"炉压",value:"pressure"},{label:"生长速率",value:"rate"},{label:"埚转",value:"crucibleRunning"},{label:"埚位",value:"crucibleSite"}]),C();const p=o(""),r=o(!1),f=o([{title:"炉台ID",key:"deviceId",width:80},{title:"炉台名称",key:"deviceName",width:80},{title:"批次号",key:"lotNo",width:80},{title:"工步",key:"mode",width:80},{title:"createTime",key:"createTime",width:80},{title:"操作",key:"active",render(e,n){return z(M,{quaternary:!0,onClick:()=>{p.value=e.remarks,r.value=!0,console.log(e,n)}},["查看异常"])},width:140,fixed:"right",align:"center"}]),a=I({page:1,pageSize:10,showSizePicker:!0,itemCount:0,pageSizes:[10,20,50],prefix(e){return console.log(e),`总数据 ${e.itemCount} 条`},onChange:async e=>{a.page=e,await c()},onUpdatePageSize:async e=>{a.pageSize=e,a.page=1,await c()}}),c=async()=>{const e=await g.getSOPMonitoring({current:a.page,size:a.pageSize,deviceName:l.value.deviceName});e.code===200&&(_.value=e.data.records,a.itemCount=e.data.total)},v=async()=>{await c()};return D(async()=>{await c()}),(e,n)=>{const w=O,h=T,y=$,k=q,S=V,b=G;return P(),R("div",A,[i(y,{ref:"formRef",model:t(l),inline:"","label-placement":"left",size:"small"},{default:u(()=>[i(h,{label:"名称",path:"deviceName"},{default:u(()=>[i(w,{value:t(l).deviceName,"onUpdate:value":[n[0]||(n[0]=s=>t(l).deviceName=s),v],type:"text",placeholder:"名称"},null,8,["value"])]),_:1})]),_:1},8,["model"]),i(k,{ref:"table",class:"h-full",remote:"",columns:t(f),data:t(_),"scroll-x":1e3,pagination:t(a),"flex-height":"","row-key":s=>s.deviceId},null,8,["columns","data","pagination","row-key"]),i(b,{show:t(r),"onUpdate:show":n[1]||(n[1]=s=>E(r)?r.value=s:null),width:700},{default:u(()=>[i(S,{title:"异常信息","native-scrollbar":!1},{default:u(()=>[B("div",J,U(t(p)),1)]),_:1})]),_:1},8,["show"])])}}});export{X as default};
