import{g as C,ah as $,a7 as F,r as N,ai as G,j as H,S as W,T as K,A,Q as V,J as a,I as t,ac as j,K as e,ae as q,aa as M,a9 as B,ak as X,t as le,aj as ne,l as S,a8 as oe,al as Y,D as se,ad as R,aE as ie,ag as Z,aD as re,E as ue,p as de,B as pe,ab as Q,af as ce}from"./index-d3fab68d.js";import{_ as E,u as ee,a as te}from"./table-fb04db72.js";import{_ as L}from"./Grid-a51efec6.js";import{_ as J}from"./FormItem-f5746594.js";import{_ as ae}from"./Scrollbar-3b231a05.js";import{_ as me}from"./InputNumber-eeed7fef.js";const fe=C({name:"DictionaryOperateModal"}),_e=C({...fe,props:$({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:$(["submitted"],["update:visible"]),setup(I,{emit:_}){const p=I,D=_,b=F(),w=N(null),l=G(I,"visible"),h=H(()=>({add:"新增字典类型",edit:"编辑字典类型"})[p.operateType]);function x(){l.value=!1}const u=W(s());function s(){return{type:"",description:"",remarks:""}}const k={type:{required:!0,trigger:["blur","input"],message:"请输入字典类型"}};function v(){Object.assign(u,s()),p.rowData&&p.operateType==="edit"&&Object.assign(u,p.rowData,{id:p.rowData.id})}async function y(){var f;(f=w.value)==null||f.validate(async r=>{r||(p.operateType==="add"?await b.addSystemDictionaryType(u):await b.putSystemDictionaryType(u),x(),D("submitted"))})}return K(l,()=>{var f;l.value&&(v(),(f=w.value)==null||f.restoreValidation())}),(f,r)=>{const i=q,d=E,n=L,c=J,U=ae,T=M,m=B,z=X;return A(),V(z,{show:l.value,"onUpdate:show":r[3]||(r[3]=g=>l.value=g),title:e(h),preset:"card",class:"w-800px"},{footer:a(()=>[t(m,{justify:"end",size:16},{default:a(()=>[t(T,{onClick:x},{default:a(()=>[j("取消")]),_:1}),t(T,{type:"primary",onClick:y},{default:a(()=>[j(" 确认 ")]),_:1})]),_:1})]),default:a(()=>[t(U,{class:"h-180px pr-20px"},{default:a(()=>[t(c,{ref_key:"formRoleRef",ref:w,model:e(u),rules:k,"label-placement":"left","label-width":100},{default:a(()=>[t(n,{responsive:"screen","item-responsive":""},{default:a(()=>[t(d,{span:"24 m:12",label:"字典类型",path:"type"},{default:a(()=>[t(i,{value:e(u).type,"onUpdate:value":r[0]||(r[0]=g=>e(u).type=g),placeholder:"请输入字典类型"},null,8,["value"])]),_:1}),t(d,{span:"24 m:12",label:"字典描述",path:"description"},{default:a(()=>[t(i,{value:e(u).description,"onUpdate:value":r[1]||(r[1]=g=>e(u).description=g),placeholder:"请输入字典描述"},null,8,["value"])]),_:1}),t(d,{span:"24 m:24",label:"备注",path:"remarks"},{default:a(()=>[t(i,{value:e(u).remarks,"onUpdate:value":r[2]||(r[2]=g=>e(u).remarks=g),type:"textarea",placeholder:"请输入备注"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}}),ve=C({name:"DictionaryInfoOperateModal"}),ye=C({...ve,props:$({operateType:{},rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:$(["submitted"],["update:visible"]),setup(I,{emit:_}){const p=I,D=_,b=F(),w=N(null),l=le("dictionaryTypeData"),h=G(I,"visible"),x=H(()=>({add:"新增字典明细",edit:"编辑字典明细"})[p.operateType]);function u(){h.value=!1}const s=W(k());function k(){return{dictId:0,label:"",value:"",sort:0,remarks:"default",description:""}}const v={label:{required:!0,trigger:["blur","input"],message:"请输入字典详情键"},value:{required:!0,trigger:["blur","input"],message:"请输入字典详情值"}};function y(){Object.assign(s,k(),{dictId:l==null?void 0:l.value.id,type:l==null?void 0:l.value.type}),console.log(l),console.log(l==null?void 0:l.value.id),p.rowData&&(Object.assign(s,{type:p.rowData.type}),console.log(123123123),p.operateType==="edit"&&Object.assign(s,p.rowData,{id:p.rowData.id}))}async function f(){var r;(r=w.value)==null||r.validate(async i=>{i||(p.operateType==="add"?await b.addSystemDictionaryInfo(s):await b.putSystemDictionaryInfo(s),u(),D("submitted"))})}return K(h,()=>{var r;h.value&&(console.log(l),y(),(r=w.value)==null||r.restoreValidation())}),(r,i)=>{const d=q,n=E,c=me,U=ne,T=L,m=J,z=ae,g=M,O=B,P=X;return A(),V(P,{show:h.value,"onUpdate:show":i[5]||(i[5]=o=>h.value=o),title:e(x),preset:"card",class:"w-800px"},{footer:a(()=>[t(O,{justify:"end",size:16},{default:a(()=>[t(g,{onClick:u},{default:a(()=>[j("取消")]),_:1}),t(g,{type:"primary",onClick:f},{default:a(()=>[j(" 确认 ")]),_:1})]),_:1})]),default:a(()=>[t(z,{class:"h-340px pr-20px"},{default:a(()=>[t(m,{ref_key:"formRoleRef",ref:w,model:e(s),rules:v,"label-placement":"left","label-width":100},{default:a(()=>[t(T,{responsive:"screen","item-responsive":""},{default:a(()=>[t(n,{span:"24 m:24",label:"字典类型",path:"type"},{default:a(()=>{var o;return[t(d,{"default-value":(o=e(l))==null?void 0:o.type,disabled:"",placeholder:"请输入字典类型"},null,8,["default-value"])]}),_:1}),t(n,{span:"24 m:12",label:"键",path:"label"},{default:a(()=>[t(d,{value:e(s).label,"onUpdate:value":i[0]||(i[0]=o=>e(s).label=o),placeholder:"请输入键"},null,8,["value"])]),_:1}),t(n,{span:"24 m:12",label:"值",path:"value"},{default:a(()=>[t(d,{value:e(s).value,"onUpdate:value":i[1]||(i[1]=o=>e(s).value=o),placeholder:"请输入值"},null,8,["value"])]),_:1}),t(n,{span:"24 m:24",label:"排序",path:"sort"},{default:a(()=>[t(c,{value:e(s).sort,"onUpdate:value":i[2]||(i[2]=o=>e(s).sort=o),class:"w-full",clearable:"",placeholder:"请输入排序"},null,8,["value"])]),_:1}),t(n,{span:"24 m:24",label:"字典类型",path:"remarks"},{default:a(()=>[t(U,{value:e(s).remarks,"onUpdate:value":i[3]||(i[3]=o=>e(s).remarks=o),options:e(b).dictInfoTagType,placeholder:"请选择组织类型"},null,8,["value","options"])]),_:1}),t(n,{span:"24 m:24",label:"描述",path:"description"},{default:a(()=>[t(d,{value:e(s).description,"onUpdate:value":i[4]||(i[4]=o=>e(s).description=o),type:"textarea",placeholder:"请输入描述"},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}}),ge={class:"h-full flex flex-col"},be=C({name:"OperateDictionaryInfoDrawer"}),we=C({...be,props:$({rowData:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:["update:visible"],setup(I){const _=I,p=F(),D=G(I,"visible"),b=N([]),{columns:w,columnChecks:l,data:h,loading:x,getData:u,pagination:s,searchParams:k}=ee({apiFn:p.getSystemDictionaryInfoList,apiParams:{current:1,size:10,dictId:null},showTotal:!0,immediate:!1,columns:()=>[{key:"index",title:"序号",width:64,align:"center"},{key:"label",title:"键",width:120,align:"center"},{key:"value",title:"值",width:120,align:"center"},{key:"remarks",title:"类型",width:100,align:"center",render:d=>S(oe,{type:d.remarks||"primary"},{default:()=>"字典类型"})},{key:"createTime",title:"创建时间",width:120,align:"center"},{key:"active",title:"操作",width:120,align:"center",fixed:"right",render:d=>S(B,{justify:"center"},{default:()=>[S(M,{size:"small",type:"primary",ghost:!0,onClick:()=>{y.value="edit",f.value={...d},v.value=!0}},{default:()=>"编辑"}),S(Y,{onPositiveClick:()=>i(d)},{default:()=>"确认删除吗？",trigger:()=>S(M,{size:"small",type:"error",ghost:!0},{default:()=>"删除"})})]})}]}),v=N(!1),y=N("add"),f=N(void 0),r=()=>{y.value="add",v.value=!0},i=async d=>{await p.delSystemDictionaryInfo(d.id),u()};return K(D,async d=>{d&&(_!=null&&_.rowData)&&(k.dictId=_==null?void 0:_.rowData.id,await u())}),(d,n)=>{const c=Z,U=te,T=re;return A(),V(e(ie),{show:D.value,"onUpdate:show":n[3]||(n[3]=m=>D.value=m),width:"60%"},{default:a(()=>[t(T,{title:"字典详情列表",closable:""},{default:a(()=>[se("div",ge,[t(c,{columns:e(l),"onUpdate:columns":n[0]||(n[0]=m=>R(l)?l.value=m:null),class:"flex-1 p-y-12px","is-delete-btn":!1,loading:e(x),onAdd:r,onRefresh:e(u)},null,8,["columns","loading","onRefresh"]),t(U,{"checked-row-keys":e(b),"onUpdate:checkedRowKeys":n[1]||(n[1]=m=>R(b)?b.value=m:null),columns:e(w),data:e(h),size:"small","flex-height":!0,remote:!0,"scroll-x":640,loading:e(x),pagination:e(s),"row-key":m=>m.id,class:"sm:h-full"},null,8,["checked-row-keys","columns","data","loading","pagination","row-key"]),t(ye,{visible:e(v),"onUpdate:visible":n[2]||(n[2]=m=>R(v)?v.value=m:null),"operate-type":e(y),"row-data":e(f),onSubmitted:e(u)},null,8,["visible","operate-type","row-data","onSubmitted"])])]),_:1})]),_:1},8,["show"])}}}),he={class:"flex-vertical-stretch gap-16px overflow-hidden <sm:overflow-auto"},ke=C({name:"SystemManagementDictionary"}),Me=C({...ke,setup(I){var d;(d=ue())==null||d.proxy;const _=F(),{columns:p,columnChecks:D,data:b,loading:w,getData:l,pagination:h,searchParams:x,resetSearchParams:u}=ee({apiFn:_.getSystemDictionaryTypeList,showTotal:!0,apiParams:{current:1,size:10,type:null},columns:()=>[{key:"index",title:"序号",width:64,align:"center"},{key:"type",title:"类型",width:120,align:"center",render:n=>S(M,{size:"small",type:"primary",class:"hover:underline underline-offset-4",text:!0,onClick:()=>{y.value={...n},i.value=!0}},{default:()=>n.type})},{key:"description",title:"描述",width:120,align:"center"},{key:"remarks",title:"备注",width:120,align:"center"},{key:"active",title:"操作",width:120,align:"center",render:n=>S(B,{justify:"center"},{default:()=>[S(M,{size:"small",type:"primary",ghost:!0,onClick:()=>{v.value="edit",y.value={...n},k.value=!0}},{default:()=>"编辑"}),S(Y,{onPositiveClick:()=>r(n)},{default:()=>"确认删除吗？",trigger:()=>S(M,{size:"small",type:"error",ghost:!0},{default:()=>"删除"})})]})}],immediate:void 0});console.log(h);const s=N([]),k=N(!1),v=N("add"),y=N(void 0);de("dictionaryTypeData",y);const f=()=>{v.value="add",k.value=!0},r=async n=>{await _.delSystemDictionaryTypeApi(n.id),l()},i=N(!1);return(n,c)=>{const U=q,T=E,m=L,z=J,g=ce,O=Z,P=te;return A(),pe("div",he,[t(g,{title:"搜索",bordered:!1,size:"small",class:"card-wrapper"},{default:a(()=>[t(z,{model:e(x),"label-placement":"left","label-width":80},{default:a(()=>[t(m,{responsive:"screen","item-responsive":""},{default:a(()=>[t(T,{span:"24 s:12 m:6",label:"字典类型",path:"roleName",class:"pr-24px"},{default:a(()=>[t(U,{value:e(x).type,"onUpdate:value":c[0]||(c[0]=o=>e(x).type=o),placeholder:"请输入字典类型"},null,8,["value"])]),_:1}),t(T,{span:"24 s:12 m:18"},{default:a(()=>[t(e(B),{class:"w-full",justify:"end"},{default:a(()=>[t(e(M),{type:"primary",ghost:"",onClick:e(l)},{icon:a(()=>[t(Q,{icon:"icon-sousuo1"})]),default:a(()=>[j(" 搜索 ")]),_:1},8,["onClick"]),t(e(M),{onClick:e(u)},{icon:a(()=>[t(Q,{icon:"icon-shuaxin-01"})]),default:a(()=>[j(" 清空 ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(g,{title:"字典管理",bordered:!1,size:"small",class:"card-wrapper sm:flex-1-hidden"},{"header-extra":a(()=>[t(O,{columns:e(D),"onUpdate:columns":c[1]||(c[1]=o=>R(D)?D.value=o:null),"is-delete-btn":!1,loading:e(w),onAdd:f,onRefresh:e(l)},null,8,["columns","loading","onRefresh"])]),default:a(()=>[t(P,{"checked-row-keys":e(s),"onUpdate:checkedRowKeys":c[2]||(c[2]=o=>R(s)?s.value=o:null),columns:e(p),data:e(b),size:"small","flex-height":!0,remote:!0,"scroll-x":640,loading:e(w),pagination:e(h),"row-key":o=>o.id,class:"sm:h-full"},null,8,["checked-row-keys","columns","data","loading","pagination","row-key"]),t(_e,{visible:e(k),"onUpdate:visible":c[3]||(c[3]=o=>R(k)?k.value=o:null),"operate-type":e(v),"row-data":e(y),onSubmitted:e(l)},null,8,["visible","operate-type","row-data","onSubmitted"]),t(we,{visible:e(i),"onUpdate:visible":c[4]||(c[4]=o=>R(i)?i.value=o:null),"row-data":e(y),onSubmitted:e(l)},null,8,["visible","row-data","onSubmitted"])]),_:1})])}}});export{Me as default};
